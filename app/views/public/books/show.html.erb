<div class="container">
  <div class="row">
    <div class="col-12">
      <h4 class="my-5">本をみる</h4>
    </div>
    
    <div class="col-10 mx-auto">
      <h4 class="mb-4 d-inline-block">本の情報</h4>
      <% if user_signed_in? %>
        <%= link_to '登録情報を編集する', edit_book_path(@book.id),
        :class => "btn btn-sm btn-success ml-5 px-4" %>
      <% end %>
      
      <div class="row ml-4 mb-5">
        <%= image_tag(@item.large_image_url) %>
      </div>
      <div class="row ml-4">
        <label class="col-lg-2">タイトル</label>
        <p class="col-lg-4"><%= @book.name %></p>
      </div>
      <div class="row ml-4">
        <label class="col-lg-2">作者</label>
        <p class="col-lg-4"><%= @book.author %></p>
      </div>
      <div class="row ml-4">
        <label class="col-lg-2">シリーズ</label>
        <p class="col-lg-4"><%= @book.series %></p>
      </div>
      <div class="row ml-4">
        <label class="col-lg-2">タグ</label>
        <% @book.tags.each do |tag| %>
          <span class="btn btn-sm btn-secondary mr-2"><%= tag.name %></span>
        <% end %>
      </div>
      
      <div class="row ml-4">
        <label class="col-lg-2">登録日</label>
        <p class="col-lg-4"><%= @book.created_at.strftime('%Y/%m/%d') %></p>
      </div>
      <div class="row ml-4">
        <label class="col-lg-2">登録者</label>
        <p class="col-lg-4"><%= @book.user.name %></p>
      </div>
      
      <% if user_signed_in? %>
        <div class="row ml-4">
          <% if @book.bookmarked_by?(current_user) %>
            <%= link_to '★ お気に入り解除', book_bookmark_path(@book), method: :delete, 
            :class => "btn btn-outline-warning" %>
          <% else %>
            <%= link_to '★ お気に入り登録', book_bookmarks_path(@book), method: :post, 
            :class => "btn btn-warning" %>
          <% end %>
        </div>
      <% end %>
      
    </div>
    
    <div class="col-10 mx-auto">
      <h4 class="my-5">感想コメント一覧</h4>
        
      <% @comments.each do |comment| %>
        <div class="col-12 bg-light px-4 pt-3 pb-2 mb-3">
          <p><%= comment.text %></p>
          <p>
            <small>投稿者:　<%= comment.user.name %></small>
            <small class="ml-5">投稿日時： <%= comment.created_at.strftime('%Y/%m/%d %H:%M') %></small>
            
            <div id="goods_buttons_<%= comment.id %>">
              <%= render partial: 'public/goods/good', locals: { book: @book, comment: comment } %>
            </div>
            
          </p>
        </div>
      <% end %>
      
      <% if user_signed_in? %>
        <%= link_to '感想コメントを投稿', new_book_comment_path(@book.id),
        :class => "btn btn-secondary px-3 my-4" %>
      <% else %>
        <div class="col-6 text-center mt-5 py-3 mx-auto bg-light">
          <p><strong>本の登録・コメント投稿には会員登録が必要です</strong></p>
          <div class="row">
            <div class="col pr-0">
              <p>会員登録がお済みの方</p>
              <%= link_to 'ログイン', new_user_session_path, :class => "btn btn-primary px-5" %>
            </div>
            <div class="col pl-0">
              <p>会員登録がお済みでない方</p>
              <%= link_to '新規登録', new_user_registration_path, :class => "btn btn-success px-5" %>
            </div>
          </div>
        </div>
      <% end %>
      
    </div>
    
    
    
  </div>
</div>